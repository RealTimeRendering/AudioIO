<html>
<head>
    <title></title>
</head>
<body>
    <canvas></canvas>

    <label for="dryWet">Dry/Wet</label>
    <input type="number" value="1" min="0" max="1" step="0.1" id="dryWet" />
    <br/>

    <label for="highpassFrequency">Delay 1 HPF (0hz to 22050hz)</label>
    <input type="number" value="0" min="0" max="22050" step="50" id="highpassFrequency" />
    <br/>

    <label for="feedback">Feedback (-1 to +1)</label>
    <input type="number" value="0" min="-1" max="1" step="0.1" id="feedback" />
    <br/>

    <label for="delay1Time">Delay 1 time (0ms to +10ms)</label>
    <input type="number" value="0" min="0" max="10" step="0.1" id="delay1Time" />
    <br/>
    <label for="delay2Time">Delay 2 time (0ms to +10ms)</label>
    <input type="number" value="0" min="0" max="10" step="0.1" id="delay2Time" />
    <br/>

    <label for="modFrequency">Mod freq (0hz to +20hz)</label>
    <input type="number" value="0" min="0" max="20" step="0.5" id="modFrequency" />
    <br/>

    <label for="mod1Amount">Delay 1 mod amount (0ms to 10ms)</label>
    <input type="number" value="0" min="0" max="10" step="0.1" id="mod1Amount" />
    <br/>

    <label for="mod1Phase">Delay 1 mod phase (0 to 1)</label>
    <input type="number" value="0" min="0" max="1" step="0.01" id="mod1Phase" />
    <br/>

    <label for="mod2Amount">Delay 2 mod amount (0ms to 10ms)</label>
    <input type="number" value="0" min="0" max="10" step="0.1" id="mod2Amount" />
    <br/>

    <label for="mod2Phase">Delay 2 mod phase (0 to 1)</label>
    <input type="number" value="0" min="0" max="1" step="0.01" id="mod2Phase" />
    <br/>



    <script type="text/javascript" src="../../../build/AudioIO.js"></script>
    <script type="text/javascript" src="../Oscilloscope.js"></script>

    <script type="text/javascript">
        var io = new AudioIO(),
            output = io.context.createGain(),
            osc = io.context.createOscillator(),
            chorus = io.createDualChorus(),
            dryWet = io.createConstant( 1 ),
            highpassFrequency = io.createConstant( 0 ),
            feedback = io.createConstant( 0 ),
            delay1Time = io.createConstant( 0 ),
            delay2Time = io.createConstant( 0 ),
            modFrequency = io.createConstant( 0 ),
            mod1Amount = io.createConstant( 0 ),
            mod2Amount = io.createConstant( 0 ),
            mod1Phase = io.createConstant( 0 ),
            mod2Phase = io.createConstant( 0 ),
            scope = new Oscilloscope( 'canvas', io );

        output.gain.value = 0.01;
        osc.type = 'sawtooth';

        dryWet.connect( chorus.controls.dryWet );
        highpassFrequency.connect( chorus.controls.highpassFrequency );
        feedback.connect( chorus.controls.feedback );
        delay1Time.connect( chorus.controls.delay1Time );
        delay2Time.connect( chorus.controls.delay2Time );
        modFrequency.connect( chorus.controls.modFrequency );
        mod1Amount.connect( chorus.controls.mod1Amount );
        mod2Amount.connect( chorus.controls.mod2Amount );
        mod1Phase.connect( chorus.controls.mod1Phase );
        mod2Phase.connect( chorus.controls.mod2Phase );


        osc.connect( chorus );
        chorus.connect( scope.analyser );
        chorus.connect( output );
        output.connect( io.master );

        scope.start( 0 );
        osc.start();

        document.querySelector( '#dryWet' ).addEventListener( 'input', function( e ) {
            dryWet.value = +e.target.value;
        } );

        document.querySelector( '#highpassFrequency' ).addEventListener( 'input', function( e ) {
            highpassFrequency.value = +e.target.value;
        } );

        document.querySelector( '#feedback' ).addEventListener( 'input', function( e ) {
            feedback.value = +e.target.value;
        } );

        document.querySelector( '#delay1Time' ).addEventListener( 'input', function( e ) {
            delay1Time.value = +e.target.value / 1000;
        } );
        document.querySelector( '#delay2Time' ).addEventListener( 'input', function( e ) {
            delay2Time.value = +e.target.value / 1000;
        } );

        document.querySelector( '#modFrequency' ).addEventListener( 'input', function( e ) {
            modFrequency.value = +e.target.value;
        } );

        document.querySelector( '#mod1Amount' ).addEventListener( 'input', function( e ) {
            mod1Amount.value = +e.target.value / 1000;
        } );

        document.querySelector( '#mod1Phase' ).addEventListener( 'input', function( e ) {
            mod1Phase.value = +e.target.value;
        } );

        document.querySelector( '#mod2Amount' ).addEventListener( 'input', function( e ) {
            mod2Amount.value = +e.target.value / 1000;
        } );

        document.querySelector( '#mod2Phase' ).addEventListener( 'input', function( e ) {
            mod2Phase.value = +e.target.value;
        } );
    </script>
</body>
</html>